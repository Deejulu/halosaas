{% extends 'base.html' %}
{% block content %}
<div class="password-change-container" style="min-height: 80vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #18181b 0%, #23272f 100%);">
  <div class="password-change-card" style="background: #111215; border-radius: 18px; box-shadow: 0 20px 40px rgba(0,0,0,0.5); padding: 2.5rem 2rem; max-width: 420px; width: 100%; border: 1px solid #23272f; position: relative; overflow: hidden;">
    <div class="password-change-header" style="text-align: center; margin-bottom: 2rem;">
      <h1 style="font-size: 2rem; font-weight: 800; background: linear-gradient(135deg, #fff 0%, #e94560 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Change Password</h1>
      <p style="color: #b0b0b0; font-size: 1rem; margin: 0;">Update your password for better security.</p>
    </div>
    <form method="post" id="password-change-form">
      {% csrf_token %}
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="id_old_password" style="font-weight: 600; color: #fff; margin-bottom: 0.5rem;">Old password</label>
        {{ form.old_password }}
      </div>
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="id_new_password1" style="font-weight: 600; color: #fff; margin-bottom: 0.5rem;">New password</label>
        {{ form.new_password1 }}
      </div>
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="id_new_password2" style="font-weight: 600; color: #fff; margin-bottom: 0.5rem;">New password confirmation</label>
        {{ form.new_password2 }}
        <small style="color: #b0b0b0;">Enter the same password as before, for verification.</small>
      </div>
      {% if form.errors %}
        <div class="alert alert-danger" style="margin-bottom: 1rem; background: #2d1a1a; color: #fff; border: 1px solid #e94560;">
          <ul style="margin-bottom: 0;">
          {% for field in form %}
            {% for error in field.errors %}
              <li>{{ error }}</li>
            {% endfor %}
          {% endfor %}
          {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
          {% endfor %}
          </ul>
        </div>
      {% endif %}
      <div class="submit-section" style="text-align: center;">
        <button type="submit" id="submit-btn" class="btn btn-primary" style="padding: 0.75rem 2rem; font-weight: 700; border-radius: 8px; background: linear-gradient(135deg, #23272f 0%, #e94560 100%); border: none; color: #fff;">Change password</button>
        <span id="loading-indicator" style="display:none; margin-left:10px; color:#e94560;">Changing...</span>
      </div>
    </form>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var form = document.getElementById('password-change-form');
    var btn = document.getElementById('submit-btn');
    var loading = document.getElementById('loading-indicator');
    form.addEventListener('submit', function() {
      btn.disabled = true;
      loading.style.display = 'inline';
    });
  });
</script>
{% endblock %}
