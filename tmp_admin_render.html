<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Restaurant SaaS</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }

        .user-welcome {
            color: #fff;
            margin-right: 15px;
        }

        .navbar-nav .nav-link {
            font-weight: 500;
            padding: 0.5rem 1rem;
        }

        .navbar-nav .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 0.375rem;
        }

        .footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
            margin-top: auto;
        }

        main {
            min-height: calc(100vh - 160px);
        }

        .alert {
            border-radius: 0.5rem;
        }

        .cart-badge {
            font-size: 0.7rem;
            padding: 0.25em 0.4em;
        }
    </style>

    
</head>

<body class="d-flex flex-column min-vh-100">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <!-- Brand -->
            <a class="navbar-brand" href="/">
                <i class="fas fa-utensils me-2"></i>Halo Sass
            </a>

            <!-- Mobile Toggle -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navigation Links -->
            <div class="collapse navbar-collapse" id="navbarMain">
                <!-- Left Navigation -->
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <i class="fas fa-home me-1"></i>Home
                        </a>
                    </li>

                    
                    <!-- Public Links -->
                    <li class="nav-item">
                        <a class="nav-link" href="#features">
                            <i class="fas fa-star me-1"></i>Features
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#pricing">
                            <i class="fas fa-tag me-1"></i>Pricing
                        </a>
                    </li>
                    
                </ul>

                <!-- Right Navigation -->
                <ul class="navbar-nav ms-auto">
                    
                    <!-- Authentication Links -->
                    <li class="nav-item">
                        <a class="nav-link" href="/accounts/login/">
                            <i class="fas fa-sign-in-alt me-1"></i>Login
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/accounts/register/">
                            <i class="fas fa-user-plus me-1"></i>Register
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </nav>

    <!-- Messages -->
    

    <!-- Main Content -->
    <main class="flex-grow-1">
        
<div class="container-fluid py-4">
    <!-- Admin Header -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card bg-primary text-white">
                <div class="card-body py-5">
                    <h1 class="display-4 mb-3">
                        <i class="fas fa-crown me-3"></i>Admin Dashboard
                    </h1>
                    <p class="lead mb-0">Platform Management & Analytics</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Platform Stats -->
    <div class="row mb-5">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                Total Restaurants
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">1</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-utensils fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                Total Users
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">5</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                Total Orders
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">0</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-shopping-bag fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                Total Revenue
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">â‚¦0</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-money-bill-wave fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Management Tabs -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header bg-white py-3">
                    <ul class="nav nav-tabs card-header-tabs" id="adminTabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="users-tab" data-bs-toggle="tab" href="#users" role="tab">
                                <i class="fas fa-users me-2"></i>Manage Users (5)
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="restaurants-tab" data-bs-toggle="tab" href="#restaurants"
                                role="tab">
                                <i class="fas fa-utensils me-2"></i>Manage Restaurants (1)
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders" role="tab">
                                <i class="fas fa-shopping-bag me-2"></i>Recent Orders (0)
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content" id="adminTabsContent">
                        <!-- Users Management Tab - GROUPED BY ROLE -->
                        <div class="tab-pane fade show active" id="users" role="tabpanel">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h5 class="mb-0">Platform Users by Role</h5>
                                <div>
                                    <span class="badge bg-primary me-2">Admins: 4</span>
                                    <span class="badge bg-success me-2">Owners: 2</span>
                                    <span class="badge bg-info">Customers: 1</span>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Admins -->
                                <div class="col-lg-4 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header bg-primary text-white">
                                            <strong>Admins</strong>
                                            <span class="badge bg-light text-dark ms-2">4</span>
                                        </div>
                                        <div class="card-body p-0">
                                            <div class="table-responsive">
                                                <table class="table table-sm mb-0">
                                                    <thead>
                                                        <tr class="table-light">
                                                            <th>#</th>
                                                            <th>Username</th>
                                                            <th>Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        
                                                        <tr>
                                                            <td>6</td>
                                                            <td>david3</td>

                                                            <td>
                                                                <span
                                                                    class="badge bg-success">{{
                                                                    user.is_active|yesno:'Active,Inactive' }}</span>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>5</td>
                                                            <td>david</td>

                                                            <td>
                                                                <span
                                                                    class="badge bg-success">{{
                                                                    user.is_active|yesno:'Active,Inactive' }}</span>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>4</td>
                                                            <td>iamadmin</td>

                                                            <td>
                                                                <span
                                                                    class="badge bg-success">{{
                                                                    user.is_active|yesno:'Active,Inactive' }}</span>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>1</td>
                                                            <td>dave</td>

                                                            <td>
                                                                <span
                                                                    class="badge bg-success">{{
                                                                    user.is_active|yesno:'Active,Inactive' }}</span>
                                                            </td>
                                                        </tr>
                                                        
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Restaurant Owners -->
                                <div class="col-lg-4 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header bg-success text-white">
                                            <strong>Restaurant Owners</strong>
                                            <span class="badge bg-light text-dark ms-2">2</span>
                                        </div>
                                        <div class="card-body p-0">
                                            <div class="table-responsive">
                                                <table class="table table-sm mb-0">
                                                    <thead>
                                                        <tr class="table-light">
                                                            <th>#</th>
                                                            <th>Username</th>
                                                            <th>Restaurants</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        
                                                        <tr>
                                                            <td>6</td>
                                                            <td>david3</td>
                                                            <td>
                                                                
                                                                0
                                                                
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>2</td>
                                                            <td>ozioma</td>
                                                            <td>
                                                                
                                                                1
                                                                
                                                            </td>
                                                        </tr>
                                                        
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Customers -->
                                <div class="col-lg-4 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header bg-info text-white">
                                            <strong>Customers</strong>
                                            <span class="badge bg-light text-dark ms-2">{{ user_counts.customer
                                                }}</span>
                                        </div>
                                        <div class="card-body p-0">
                                            <div class="table-responsive">
                                                <table class="table table-sm mb-0">
                                                    <thead>
                                                        <tr class="table-light">
                                                            <th>#</th>
                                                            <th>Username</th>
                                                            <th>Orders</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        
                                                        <tr>
                                                            <td>5</td>
                                                            <td>david</td>
                                                            <td>0</td>
                                                        </tr>
                                                        
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Restaurants Management Tab - ENHANCED -->
                        <div class="tab-pane fade" id="restaurants" role="tabpanel">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h5 class="mb-0">All Platform Restaurants</h5>
                                <div>
                                    <span class="badge bg-success me-2">Active: </span>
                                    <span class="badge bg-danger">Suspended: </span>
                                </div>
                            </div>

                            
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th>ID</th>
                                            <th>Restaurant</th>
                                            <th>Owner</th>
                                            <th>Contact</th>
                                            <th>Status</th>
                                            <th>Orders</th>
                                            <th>Created</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td>1</td>
                                            <td>
                                                <strong>gem</strong>
                                                
                                                <br>
                                                <small class="text-muted">{{ restaurant.description|truncatewords:5
                                                    }}</small>
                                            </td>
                                            <td>
                                                <strong>ozioma</strong>
                                                <br>
                                                <small class="text-muted">dave@gmail.com</small>
                                            </td>
                                            <td>
                                                <small>
                                                    <i class="fas fa-phone me-1"></i>09033941467<br>
                                                    <i class="fas fa-envelope me-1"></i>karendee0011@gmail.com
                                                </small>
                                            </td>
                                            <td>
                                                <span
                                                    class="badge bg-success">
                                                    Active
                                                </span>
                                            </td>
                                            <td>0</td>
                                            <td>Oct 26, 2025</td>
                                            <td>
                                                <div class="btn-group btn-group-sm">
                                                    <a href="/restaurants/gem/"
                                                        class="btn btn-outline-primary" target="_blank">
                                                        <i class="fas fa-eye"></i>
                                                    </a>
                                                    <a href="/restaurants/manage/1/"
                                                        class="btn btn-outline-warning">
                                                        <i class="fas fa-edit"></i>
                                                    </a>
                                                    <button class="btn btn-outline-danger"
                                                        data-action="toggle-restaurant"
                                                        data-restaurant-id="1"
                                                        data-is-active="True">
                                                        <i class="fas fa-power-off"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                            
                        </div>

                        <!-- Orders Tab -->
                        <div class="tab-pane fade" id="orders" role="tabpanel">
                            <h5 class="mb-4">Recent Platform Orders</h5>
                            
                            <div class="text-center py-4">
                                <i class="fas fa-shopping-bag fa-3x text-muted mb-3"></i>
                                <h5 class="text-muted">No Recent Orders</h5>
                                <p class="text-muted">Orders will appear here when customers place them.</p>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Admin Actions - FIXED LINKS -->
    <div class="row">
        <div class="col-md-3 mb-3">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="fas fa-tools fa-3x text-primary mb-3"></i>
                    <h5 class="card-title">Django Admin</h5>
                    <p class="card-text">Full backend control</p>
                    <a href="/admin/" class="btn btn-primary btn-block" target="_blank">Access</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="fas fa-chart-bar fa-3x text-success mb-3"></i>
                    <h5 class="card-title">Analytics</h5>
                    <p class="card-text">Platform reports & insights</p>
                    <a href="/analytics/" class="btn btn-success btn-block">View
                        Reports</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="fas fa-cog fa-3x text-info mb-3"></i>
                    <h5 class="card-title">Settings</h5>
                    <p class="card-text">Platform configuration</p>
                    <a href="/settings/" class="btn btn-info btn-block">Configure</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-center h-100">
                <div class="card-body">
                    <i class="fas fa-bell fa-3x text-warning mb-3"></i>
                    <h5 class="card-title">Notifications</h5>
                    <p class="card-text">System alerts & messages</p>
                    <a href="/notifications/" class="btn btn-warning btn-block">Check</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS for tabs -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Tab functionality
        var triggerTabList = [].slice.call(document.querySelectorAll('#adminTabs a'))
        triggerTabList.forEach(function (triggerEl) {
            var tabTrigger = new bootstrap.Tab(triggerEl)
            triggerEl.addEventListener('click', function (event) {
                event.preventDefault()
                tabTrigger.show()
            })
        });

        // Event delegation for action buttons
        document.addEventListener('click', function (e) {
            const target = e.target.closest('[data-action]');
            if (!target) return;

            const action = target.getAttribute('data-action');

            if (action === 'view-user') {
                const userId = target.getAttribute('data-user-id');
                viewUser(userId);
            } else if (action === 'edit-user') {
                const userId = target.getAttribute('data-user-id');
                editUser(userId);
            } else if (action === 'toggle-user') {
                const userId = target.getAttribute('data-user-id');
                const isActive = target.getAttribute('data-is-active');
                toggleUser(userId, isActive);
            } else if (action === 'toggle-restaurant') {
                const restaurantId = target.getAttribute('data-restaurant-id');
                const isActive = target.getAttribute('data-is-active');
                toggleRestaurant(restaurantId, isActive);
            }
        });

        // Auto-refresh every 60 seconds
        setInterval(function () {
            if (!document.hidden && document.getElementById('users-tab').classList.contains('active')) {
                // You can add AJAX refresh here later
                console.log('Auto-refresh admin dashboard');
            }
        }, 60000);
    });

    // Action functions
    function viewUser(userId) {
        // Redirect to Django admin user detail page
        window.location.href = `/admin/accounts/customuser/${userId}/change/`;
    }

    function editUser(userId) {
        // Redirect to Django admin user edit page
        window.location.href = `/admin/accounts/customuser/${userId}/change/`;
    }

    function toggleUser(userId, isActive) {
        const action = isActive === 'True' ? 'deactivate' : 'activate';
        if (confirm(`Are you sure you want to ${action} this user?`)) {
            // Send AJAX request to toggle user status
            fetch(`/admin/accounts/customuser/${userId}/change/`, {
                method: 'GET',
            }).then(() => {
                alert(`User ${action}d successfully! Redirecting to Django admin to complete the action.`);
                window.location.href = `/admin/accounts/customuser/${userId}/change/`;
            });
        }
    }

    function toggleRestaurant(restaurantId, isActive) {
        const action = isActive === 'True' ? 'suspend' : 'activate';
        if (confirm(`Are you sure you want to ${action} this restaurant?`)) {
            // Redirect to Django admin restaurant edit page
            alert(`Redirecting to edit restaurant. You can ${action} it there.`);
            window.location.href = `/admin/restaurants/restaurant/${restaurantId}/change/`;
        }
    }

    function showComingSoon(feature) {
        alert(`${feature} dashboard is coming soon!\n\nThis feature is currently under development.`);
    }
</script>

<style>
    .card {
        transition: transform 0.2s ease-in-out;
    }

    .card:hover {
        transform: translateY(-2px);
    }

    .table th {
        border-top: none;
        font-weight: 600;
    }

    .badge {
        font-size: 0.75rem;
    }

    .btn-group .btn {
        border-radius: 0.375rem;
    }

    .nav-tabs .nav-link {
        border: none;
        border-bottom: 3px solid transparent;
        font-weight: 500;
    }

    .nav-tabs .nav-link.active {
        border-bottom: 3px solid #007bff;
        background: transparent;
    }
</style>

    </main>

    <!-- Footer -->
    <footer class="footer mt-5 py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-utensils me-2"></i>Halo Sass</h5>
                    <p class="text-muted">The complete solution for your restaurant's online presence.</p>
                </div>
                <div class="col-md-3">
                    <h6>Quick Links</h6>
                    <ul class="list-unstyled">
                        <li><a href="/" class="text-muted text-decoration-none">Home</a></li>
                        
                        <li><a href="/accounts/login/" class="text-muted text-decoration-none">Login</a></li>
                        <li><a href="/accounts/register/" class="text-muted text-decoration-none">Register</a></li>
                        
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6>Contact</h6>
                    <ul class="list-unstyled text-muted">
                        <li><i class="fas fa-envelope me-2"></i> support@halosass.com</li>
                        <li><i class="fas fa-phone me-2"></i> +1 (555) 123-4567</li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-12 text-center">
                    <p class="text-muted mb-0">
                        &copy; 2025 Halo Sass. All rights reserved.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script>
        // Auto-dismiss alerts after 5 seconds
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(function () {
                const alerts = document.querySelectorAll('.alert');
                alerts.forEach(function (alert) {
                    const bsAlert = new bootstrap.Alert(alert);
                    bsAlert.close();
                });
            }, 5000);
        });

        // Simple cart counter update (will be enhanced with AJAX later)
        function updateCartCounter() {
            // This will be implemented with AJAX in the next phase
            console.log('Cart counter would update here');
        }
    </script>

    
</body>

</html>